import { Canvas, Meta, Story } from '@storybook/addon-docs';
import { MultiSelectPicker } from '../index';

<Meta title="MDX/MultiSelectPicker" component={MultiSelectPicker} />

## MultiSelectPicker

This Doc will gives you a brief description of the MultiSelectPicker
component.

**MultiSelectPicker Props**

```tsx
 interface MultiSelectPickerProps{
 defaultSelectedKeys?: string[]
 selectedKeys?:string[]
 disabledKeys?:Array<Key>
 isDisabled?:boolean

 onSelectionChange?:(value:string)⇒void
 onFocus?:(event:FocusEvent)⇒void
 onBlur?:(event:Blur)⇒void

 defaultOpen?: boolean
 size?: ’Small’| ’Medium’ | ‘ExtralSmall’
 errorMessage?:React.ReactNode
 hint ?:React.ReactNode
 label?:React.ReactNode
 shouldOpenPopoverOnLabelClick?:boolean

 children ?: Item | Section
 items?:Array<any>

 id?: string
 dataTestId?: string

}
```

Follow below code snippet to use Picker.

```tsx
import {
  MultiSelectPicker,
  Item,
  Section,
  MultiSelectPickerContextProvider,
} from '@nx-repo/design-system';

return (
  <ThemeContextProvider theme={defaultTheme}>
    <MultiSelectPickerContextProvider>
      <MultiSelectPicker {...props}>
        <Item key="A1">A1</Item>
        <Item key="A2">A2</Item>
        <Item key="A3">A3</Item>
      </MultiSelectPicker>
    </MultiSelectPickerContextProvider>
  </ThemeContextProvider>
);
```

For rendering the custom Value container and Leading icon you should wrap the picker component with `MultiSelectPickerContextProvider` which is exported from `'@nx-repo/design-system'`.

`MultiSelectPickerContextProvider` will accept two methods those are `renderValueContainer` and `renderLeadingIcon`

So if you want to render custom value container then a pass `renderValueContainer` method to `MultiSelectPickerContextProvider`. The method will gets args `valueContainerState`.
Where valueContainerState contains the **selectedKeys**.

```tsx
export interface ValueContainerState {
  selectedKeys: Key[];
}
```

If you want to render leading icon in Picker button send a function to `MultiSelectPickerContextProvider`s `renderLeadingIcon` method. In that method you can render your custom leading Icon.

Example for rendering custom value container and leading Icon.

```tsx
const MultiSelectPickerWithLeadingIcon = (props) => {
  const renderLeadingIcon = () => {
    return <UserIcon />;
  };

  return (
    <ThemeContextProvider theme={defaultTheme}>
      <MultiSelectPickerContextProvider renderLeadingIcon={renderLeadingIcon}>
        <MultiSelectPicker
          {...props}
          placeholder={'select'}
          label="Picker with error Message"
          errorMessage={'Oops its an error :)'}
        >
          <Item key="A1">A1</Item>
          <Item key="A2">A2</Item>
          <Item key="A3">A3</Item>
        </MultiSelectPicker>
      </MultiSelectPickerContextProvider>
    </ThemeContextProvider>
  );
};
```

`key` prop to `Item` will be the `selectedKey` in `onSelectionChange` method. So if you want to update key of your items send key prop to respective item.
For more details about key customization see the code of `MultiSelectPickerWithDynamicOptionsWithSections` story in storybook.

**Follow storybook stories to know about the cases in covered in MultiSelectPicker.**

#### **Cases covered**

- rendering grouped options using sections and items as children
- render custom value container by getting a function in the provider and sending state-related prop to it
- exposing getListItemKey, and getListItemValue functions for taking specific key as Key.
- exposing custom option prop for different variants of the dropdown.
- accepting selected keys for controlled behavior.
- accepting default selected keys for uncontrolled behavior.
- handling sizing with size prop

#### **Cases not covered**

- clicking on the popover option not opening another popover
- having one key and selecting another key as the selected key
- not supporting both controlled and uncontrolled behavior by throwing error
- not supporting section title customization (groundwork has to be done here)

#### **Compromised things**

- border color for options in focused state
- Clickable with clickable for tags and clear all button is not working properly

#### **Road Map**

- border color in focused state
